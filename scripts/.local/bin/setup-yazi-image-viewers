#!/bin/bash

# Script para configurar visualizadores de imagem no Yazi

echo "ğŸ”§ Configurando visualizadores de imagem para Yazi..."

# Detectar distribuiÃ§Ã£o
if command -v pacman >/dev/null 2>&1; then
    DISTRO="arch"
elif command -v apt >/dev/null 2>&1; then
    DISTRO="debian"
elif command -v dnf >/dev/null 2>&1; then
    DISTRO="fedora"
else
    echo "âŒ DistribuiÃ§Ã£o nÃ£o suportada automaticamente"
    exit 1
fi

echo "ğŸ“¦ Instalando visualizadores de imagem..."

case $DISTRO in
    arch)
        echo "ğŸ”„ Instalando imv (visualizador minimalista para terminal)..."
        if command -v sudo >/dev/null 2>&1; then
            sudo pacman -S --needed imv
        else
            echo "âš ï¸  Por favor, instale manualmente: sudo pacman -S imv"
        fi
        ;;
    debian)
        echo "ğŸ”„ Instalando feh (visualizador leve)..."
        if command -v sudo >/dev/null 2>&1; then
            sudo apt update && sudo apt install -y feh
        else
            echo "âš ï¸  Por favor, instale manualmente: sudo apt install feh"
        fi
        ;;
    fedora)
        echo "ğŸ”„ Instalando feh..."
        if command -v sudo >/dev/null 2>&1; then
            sudo dnf install -y feh
        else
            echo "âš ï¸  Por favor, instale manualmente: sudo dnf install feh"
        fi
        ;;
esac

echo "âœ… ConfiguraÃ§Ã£o concluÃ­da!"
echo ""
echo "ğŸ® Atalhos configurados:"
echo "  Enter/E  - Abrir imagem em tela cheia"
echo "  q        - Fechar visualizaÃ§Ã£o"
echo "  l        - Smart Enter (entra na pasta ou abre imagem)"
echo ""
echo "ğŸ“¸ O Yazi agora suporta preview de imagens em alta qualidade!"