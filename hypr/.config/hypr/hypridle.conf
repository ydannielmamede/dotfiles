# hypridle.conf - simples de manter
# Docs: https://wiki.hyprland.org/Hypr-Ecosystem/hypridle
#
# Ajuste rapido:
# 1) Troque os tempos (timeout) nos listeners
# 2) Troque o comando de lock no bloco general
# 3) Comente blocos que nao quiser usar

general {
    # Noctalia lock (recomendado para seu setup)
    lock_cmd = qs -c noctalia-shell ipc call lockScreen lock

    # Garante lock antes de suspender
    before_sleep_cmd = loginctl lock-session

    # Liga telas ao voltar do suspend (evita tela preta)
    after_sleep_cmd = hyprctl dispatch dpms on
}

# 1) Escurece tela via ddcutil (2 min)
# Ajuste:
# - Troque --bus 8 para o barramento correto (ddcutil detect)
# - Troque o valor 15 para mais claro/escuro
# listener {
#     timeout = 120
#     on-timeout = sh -c 'mkdir -p /tmp/hypridle-ddc && ddcutil --bus 8 getvcp 10 | sed -n "s/.*current value = *\\([0-9]*\\).*/\\1/p" > /tmp/hypridle-ddc/display1 && ddcutil --bus 8 setvcp 10 15'
#     on-resume = sh -c 'test -s /tmp/hypridle-ddc/display1 && ddcutil --bus 8 setvcp 10 "$(cat /tmp/hypridle-ddc/display1)"'
# }

# 2) Apaga luz do teclado (2 min e 10s)
# Comente este bloco se seu teclado nao tiver backlight
listener {
    timeout = 130
    on-timeout = brightnessctl -sd rgb:kbd_backlight set 0
    on-resume = brightnessctl -rd rgb:kbd_backlight
}

# 3) Trava sessao (5 min)
listener {
    timeout = 300
    on-timeout = qs -c noctalia-shell ipc call lockScreen lock
}

# 4) Desliga monitores (5 min e 30s)
listener {
    timeout = 330
    on-timeout = hyprctl dispatch dpms off
    on-resume = hyprctl dispatch dpms on
}

# 5) Suspende o PC (10 min)
listener {
    timeout = 600
    on-timeout = systemctl suspend
}
